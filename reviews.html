<!DOCTYPE html>
<html>
<head>
	<title>Product Reviews</title>
	<style>
		* {
			font-family: Verdana;
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		
		body {
			background-color: #f7f7f7;
			padding: 20px;
		}
		
		h1 {
			text-align: center;
			margin-bottom: 20px;
		}
		
		form {
			background-color: #fff;
			padding: 20px;
			border-radius: 5px;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			margin-bottom: 20px;
		}
		
		form label {
			display: block;
			margin-bottom: 10px;
		}
		
		form input[type="text"],
		form select,
		form textarea {
			display: block;
			width: 100%;
			padding: 10px;
			border: 1px solid #ccc;
			border-radius: 5px;
			margin-bottom: 20px;
			font-size: 16px;
		}
		
		form input[type="submit"] {
			background-color: #e49800;
			color: #fff;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			font-size: 16px;
			cursor: pointer;
		}
		
		#reviews {
			background-color: #fff;
			padding: 20px;
			border-radius: 5px;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
		}
		
		#reviews h3 {
			margin-bottom: 10px;
			font-size: 18px;
		}
		
		#reviews p {
			font-size: 16px;
			line-height: 1.5;
		}

		/* Styles for the star rating */
		.stars {
			display: flex;
			flex-direction: row-reverse;
			align-items: center;
			justify-content: flex-end;
		}

		.star {
			font-size: 30px;
			cursor: pointer;
			color: #ccc;
			transition: color 0.3s ease-in-out;
		}

		.star:hover,
		.star.active {
			color: #e49800;
		}
	</style>
</head>
<body>
	<h1>Product Reviews</h1>

	<!-- Review form -->
	<form>
		<label for="name">Name:</label>
		<input type="text" id="name" name="name">

		<label for="rating">Rating:</label>
		<div class="stars">
			<span class="star" data-rating="5">&#9733;</span>
			<span class="star" data-rating="4">&#9733;</span>
			<span class="star" data-rating="3">&#9733;</span>
			<span class="star" data-rating="2">&#9733;</span>
			<span class="star" data-rating="1">&#9733;</span>
			<input type="hidden" id="rating" name="rating">
		</div>

		<label for="review">Review:</label>
		<textarea id="review" name="review"></textarea>

		<input type="submit" value="Submit">
	</form>

	<!-- Reviews display -->
	<div id="reviews">
		<!-- Reviews will be displayed here -->
	</div>

	<!-- Firebase SDK -->
	<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>
<script>
	// Firebase configuration
const firebaseConfig = {
	apiKey: "YOUR_API_KEY",
	authDomain: "YOUR_AUTH_DOMAIN",
	databaseURL: "YOUR_DATABASE_URL",
	projectId: "YOUR_PROJECT_ID",
	storageBucket: "YOUR_STORAGE_BUCKET",
	messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
	appId: "YOUR_APP_ID"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

// Get a reference to the reviews in the Firebase database
const reviewsRef = firebase.database().ref('reviews');

// Get the review form element
const form = document.querySelector('form');

// Get the reviews element
const reviews = document.getElementById('reviews');

// Handle form submission
form.addEventListener('submit', (e) => {
	e.preventDefault();

	// Get the form data
	const name = form.name.value.trim();
	const rating = form.rating.value.trim();
	const review = form.review.value.trim();

	// Validate the form data
	if (name === '' || rating === '' || review === '') {
		alert('Please fill in all fields');
		return;
	}

	// Create a new review object
	const newReview = {
		name: name,
		rating: rating,
		review: review,
		timestamp: Date.now()
	};

	// Save the new review to Firebase
	reviewsRef.push(newReview);

	// Clear the form
	form.reset();
});

// Display the reviews
reviewsRef.on('value', (snapshot) => {
	// Clear the current reviews
	reviews.innerHTML = '';

	// Loop through the reviews in the snapshot
	snapshot.forEach((childSnapshot) => {
		// Get the review data
		const review = childSnapshot.val();

		// Create a new review element
		const reviewElem = document.createElement('div');
		reviewElem.classList.add('review');

		const nameElem = document.createElement('h3');
		nameElem.textContent = review.name;
		reviewElem.appendChild(nameElem);

		const ratingElem = document.createElement('div');
		ratingElem.classList.add('rating');
		for (let i = 1; i <= 5; i++) {
			const starElem = document.createElement('span');
			starElem.classList.add('star');
			if (i <= review.rating) {
				starElem.classList.add('active');
			}
			starElem.textContent = 'â˜…';
			ratingElem.appendChild(starElem);
		}
		reviewElem.appendChild(ratingElem);

		const reviewTextElem = document.createElement('p');
		reviewTextElem.textContent = review.review;
		reviewElem.appendChild(reviewTextElem);

		const timestampElem = document.createElement('p');
		const timestampDate = new Date(review.timestamp);
		timestampElem.textContent = `Reviewed on ${timestampDate.toLocaleDateString()} at ${timestampDate.toLocaleTimeString()}`;
		reviewElem.appendChild(timestampElem);

		reviews.appendChild(reviewElem);
	});
});

// Handle star rating clicks
form.addEventListener('click', (e) => {
	if (e.target.classList.contains('star')) {
		const rating = e.target.getAttribute('data-rating');
		form.rating.value = rating;
		const stars = form.querySelectorAll('.star');
		stars.forEach((star) => {
			if (star.getAttribute('data-rating') <= rating) {
				star.classList.add('active');
			} else {
				star.classList.remove('active');
			}
		});
	}
});

</script>
</body>
</html>
